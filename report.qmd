---
title: "Stat Wizards Project"
subtitle: "Report on jobs in Data/AI"
format: html
editor: visual
execute:
  echo: true
---

Introduction and Data

This research topic aims to understand various tech jobs and how they pay on average. Our research question is: How have the salaries of different jobs within the field of tech changed over time? Also, are these results different for companies in the US vs. outside the US?

Our hypothesis is that machine learning/AI salaries will have increased in recent years more so than Data scientist/analyst jobs, and that US-based workers will have higher mean salaries.

The source of the data is ai-jobs.net. It is a website for posting tech jobs and analyzing trends in job data. The site collects salary information anonymously from professionals all over the world in the AI/ML/Data Science space and makes it publicly available. The vast majority of the data was collected in 2023, 2022, and 2021. Each observation records the person's job info. This includes work year, employment type, job title, salary, employee residence, company location, etc.. We would most likely use the salary_in_usd variable as our response variable, which is quantitative, along with categorical explanatory variables including job_title and employee_residence.

One possible ethical issue regarding how our data was collected is that people submit their own salary information to this dataset. This could lead to people submitting incorrect information and lying about their salaries.

## Literature

-   Find one published credible article on the topic you are interested in researching.

    https://www.projectpro.io/article/machine-learning-engineer-vs-data-scientist/534

-   Provide a one paragraph summary about the article.

    "According to [Payscale](https://www.payscale.com/research/US/Job=Data_Scientist/Salary/3eb9c016/Early-Career "Payscale"), the salary of Data Scientists lie between the range of \$85K and \$134K. On the other hand,\[machine learning engineers earn somewhere between \$93K and \$149K \](https://www.payscale.com/research/US/Job=Machine_Learning_Engineer/Salary" machine learning engineers earn somewhere between \$93K and \$149K "). These figures are purely survey-based and may vary from place to place, company to company."

    The article says that machine learning engineers tend to have higher average salaries, because they tend to be software engineers that also have data science knowledge. However, it also says that it varies greatly place to place.

\
Methodology

```{r}
#| label: load-pkgs
#| message: false

library(tidyverse)
library(tidymodels)
```

```{r}
#| label: load-data-1
#| message: false

salaries <- read_csv("data/salaries.csv")

glimpse(salaries)
```

```{r}
#| label: lin-reg


salary_jobs <- salaries |>
  filter(job_title %in% c("Data Scientist", "Data Analyst", "Machine Learning Engineer"))

salary_jobs <- salary_jobs |>
  mutate(work_year = work_year - 2020) |>
  mutate("US_based" = if_else(company_location == "US", "US", "Not US"))
  

linear_reg() |>
  set_engine("lm") |>
  fit(salary_in_usd ~ work_year * job_title, data = salary_jobs) |>
  tidy()
```

```{r}

salary_jobs |>
     ggplot(aes(x = work_year, y = salary_in_usd, color = job_title)) +
     geom_point(alpha = 0.05) +
     labs(
      title = "Average Salary per year by Job Title",
       x = "Year",
       y = "Salary (USD)",
       color = "job_title"
    ) +
    geom_smooth(method = "lm", se = FALSE, linetype = "dashed") + 
    scale_color_discrete(labels = c("Data Analyst", "Data Scientist", "Machine Learning Engineer"))
```

```{r}
boot_df <- salary_jobs |>
  specify(response = salary_in_usd) |>
  generate(reps = 5000, type = "bootstrap") |>
  calculate(stat = "mean")

boot_df |>
  summarize(lower = quantile(stat, 0.005),
            upper = quantile(stat, 0.995))
```

```{r}
#| label: plot-salaries-by-year

salary_jobs |>
  ggplot(aes(x = work_year, y = salary_in_usd, color = job_title, fill = US_based)) +
  geom_point() +
  facet_wrap("US_based")

```

```{r}
#| label: log-reg

salary_jobs2 <- salaries |>
  filter(str_detect(salaries$job_title, "Engineer|Analyst"))

salary_jobs2 <- salary_jobs2 |>
  mutate(job_type = if_else(str_detect(job_title, "Engineer"), "Engineer", "Analyst"))

salary_jobs2$job_type<-as.factor(salary_jobs2$job_type)

model <- logistic_reg() |>
  set_engine("glm") |>
  fit(job_type ~ salary_in_usd, data = salary_jobs2, family = "binomial") #this is trying to find the probability you're an analyst or an engineer based on your salary

salary_jobs2 <- salary_jobs2 |>
  mutate(pred_prob = predict(model$fit, type = "response"))

ggplot(data = salary_jobs2) + 
  geom_point(aes(x = salary_in_usd, y = as.numeric(job_type) -1, color = job_type)) + 
  geom_line(aes(x = salary_in_usd, y = pred_prob)) + 
  labs(x = "Salary (USD)", 
       y = "Predicted Probability You're an Engineer", 
       color = "Job Type"
       )
```

summary statistics

```{r}
#| label: means

salary_jobs |>
  filter(job_title == "Data Analyst") |>
  filter(US_based == "US") |>
  summarize(mean(salary_in_usd))

salary_jobs |>
  filter(job_title == "Data Analyst") |>
  filter(US_based != "US") |>
  summarize(mean(salary_in_usd))

salary_jobs |>
  filter(job_title == "Data Scientist") |>
  filter(US_based == "US") |>
  summarize(mean(salary_in_usd))

salary_jobs |>
  filter(job_title == "Data Scientist") |>
  filter(US_based != "US") |>
  summarize(mean(salary_in_usd))

salary_jobs |>
  filter(job_title == "Machine Learning Engineer") |>
  filter(US_based == "US") |>
  summarize(mean(salary_in_usd))

salary_jobs |>
  filter(job_title == "Machine Learning Engineer") |>
  filter(US_based != "US") |>
  summarize(mean(salary_in_usd))
```

```{r}
#| label: medians

salary_jobs |>
  filter(job_title == "Data Analyst") |>
  filter(US_based == "US") |>
  summarize(median(salary_in_usd))

salary_jobs |>
  filter(job_title == "Data Analyst") |>
  filter(US_based != "US") |>
  summarize(median(salary_in_usd))

salary_jobs |>
  filter(job_title == "Data Scientist") |>
  filter(US_based == "US") |>
  summarize(median(salary_in_usd))

salary_jobs |>
  filter(job_title == "Data Scientist") |>
  filter(US_based != "US") |>
  summarize(median(salary_in_usd))

salary_jobs |>
  filter(job_title == "Machine Learning Engineer") |>
  filter(US_based == "US") |>
  summarize(median(salary_in_usd))

salary_jobs |>
  filter(job_title == "Machine Learning Engineer") |>
  filter(US_based != "US") |>
  summarize(median(salary_in_usd))
```

Result

In order to arrive at an accurate and appropriate conclusion for our hypothesis: that machine learning/AI salaries will have increased in recent years more so than Data scientist/analyst jobs and that US-based workers will have higher mean salaries, we chose to visualize our data set in multiple ways. Two clear observations were confirmed in our plots. First, the mean salaries in 2020 were ordered from lowest to highest: Data Analyst, Data Scientist, and Machine Learning Engineer. This can be seen from our tidy(), as our intercept value is 76466.8 (the mean Data Analyst salary in 2020), the Data Scientist intercept is (76466.8 + 148.9), and the Machine Learning intercept is (76466.8 + 21460.2). These intercept values represented the mean salaries in 2020. This also confirms our hypothesis that Machine learning salaries are higher than data scientist/analyst jobs. The second observation is that rates at which job salaries have increased since 2020 are ordered from lowest to highest such as Data Analyst, Machine Learning Engineer, and Data Scientist. This can also be seen from our tidy(), as the baseline slope (slope for data analysts) is 12817.4 usd/year. Then, the Machine Learning Engineer slope is (12817.4 + 8996.96), and the Data Scientist slope is (12817.4 + 14633.8). Lastly, the mean summary statistic also is consistent with our hypothesis that the mean salary is highest for Machine learning (\$149512.7) compared to Data scientists (\$136405.7) and Data Analysts (\$106134.4) mean salaries.
